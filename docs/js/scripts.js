
const products=[{id:1,category:"Рушники",imgMain:"img/rushniki/1/rushnik.jpg",img:["img/rushniki/1/rushnik_2.jpg","img/rushniki/1/rushnik_3.jpg","img/rushniki/1/rushnik_4.jpg","img/rushniki/1/rushnik_5.jpg"],title:"Махрові рушники. Натуралка, люкс котон 100%.",pack:!0,size:{size1:{s:"70X140",inPack:6,salePack:3,price:330,salePrice:310},size2:{s:"50X90",inPack:6,salePack:3,price:170,salePrice:160}}},{id:2,category:"Пледи",imgMain:"img/pledy/1/pled_haski.webp",img:[],title:'Іграшка з пледиком всередині "Хаскі"',pack:!0,size:{size1:{s:"110X150",inPack:1,salePack:4,price:450,salePrice:370}}},{id:3,category:"Постільна білизна",imgMain:"img/postil/1/postil.jpg",img:["img/postil/1/postil_1.jpg","img/postil/1/postil_2.jpg","img/postil/1/postil_3.jpg","img/postil/1/postil_4.jpg","img/postil/1/postil_5.jpg"],title:"Покривала +2 наволочки. 2 слоя тканини, хб",pack:!0,size:{size1:{s:"Покривало 200 на 230. Наволочки 50 на 70 (2шт).",inPack:1,salePack:6,price:690,salePrice:550}}},{id:4,category:"Покривала",imgMain:"img/pokrivalo/1/pokrivalo.jpg",img:["img/pokrivalo/1/pokrivalo_1.jpg","img/pokrivalo/1/pokrivalo_2.jpg","img/pokrivalo/1/pokrivalo_3.jpg","img/pokrivalo/1/pokrivalo_4.jpg","img/pokrivalo/1/pokrivalo_5.jpg"],title:'Покривала фібра "іній". М\'якенькі,пухкенькі,приємні на дотик.',pack:!0,size:{size1:{s:"180X200",inPack:6,salePack:10,price:245,salePrice:235}}}];function groupByCategory(e){return e.reduce(((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e)),{})}function renderProductCard(e,t){const r=Object.keys(e.size)[0],n=Object.entries(e.size).map((([e,r],n)=>`\n        <label class="size-label">\n            <input \n                type="radio" \n                name="size-${t}" \n                value="${e}" \n                ${0===n?"checked":""}\n            >\n            ${r.s}\n        </label>\n    `)).join(""),a=e.size[r];return`\n        <figure class="product-card" data-id="${e.id}" data-size="${r}">\n            <figcaption>\n                <img src="${e.imgMain}" alt="${e.title}" class="main-img">\n                <div class="img_container">\n                    ${e.img.map(((t,r)=>`\n                        <picture class="img-wrapper">\n                            <img src="${t}" class="small_img" alt="${e.title}">\n                            <span class="img-index">${r+1}</span>\n                        </picture>\n                    `)).join("")}\n                </div>\n                <h3>${e.title}</h3>\n                <div class="sizes">${n}</div>\n                <p class="price">\n                    <span class="price-value">${a.price}</span> грн <span>(за 1шт)</span>\n                </p>\n                <div class="quantity-controls">\n                    <button class="decrease">-</button>\n                    <span class="quantity">${a.inPack}</span>\n                    <button class="increase">+</button>\n                </div>\n                <p>Мінімальна кількість: <span class="pack-count">${a.inPack}</span> шт</p>\n                <button class="add-to-cart">В кошик</button>\n            </figcaption>\n        </figure>\n    `}function initProductCards(e){document.querySelectorAll(".product-card").forEach((t=>{const r=parseInt(t.dataset.id),n=e.find((e=>e.id===r));function a(){const e=t.querySelector('input[type="radio"]:checked').value;return n.size[e]}function i(){const e=a(),r=parseInt(t.querySelector(".quantity").textContent)/e.inPack>=e.salePack?e.salePrice:e.price;t.querySelector(".price-value").textContent=r,t.querySelector(".pack-count").textContent=e.inPack}t.querySelector(".add-to-cart").addEventListener("click",(()=>{const e=t.querySelector('input[type="radio"]:checked').value,r=n.size[e],a=parseInt(t.querySelector(".quantity").textContent),i=a/r.inPack>=r.salePack?r.salePrice:r.price,c={id:n.id,title:n.title,size:r.s,quantity:a,pricePerItem:i,total:a*i,img:n.imgMain};let o=JSON.parse(localStorage.getItem("cart"))||[];const s=o.findIndex((e=>e.id===c.id&&e.size===c.size));-1!==s?(o[s].quantity+=c.quantity,o[s].total+=c.total):o.push(c),localStorage.setItem("cart",JSON.stringify(o))})),t.querySelectorAll('input[type="radio"]').forEach((e=>{e.addEventListener("change",(()=>{const e=a();t.querySelector(".quantity").textContent=e.inPack,i()}))}));const c=t.querySelector(".decrease"),o=t.querySelector(".increase"),s=t.querySelector(".quantity");c.addEventListener("click",(()=>{const e=a();let t=parseInt(s.textContent);t>e.inPack&&(t-=e.inPack,s.textContent=t,i())})),o.addEventListener("click",(()=>{const e=a();let t=parseInt(s.textContent);t+=e.inPack,s.textContent=t,i()}))}))}let productsPerPage=12;function renderPage(){displayProducts(products.slice(0,productsPerPage));const e=document.querySelector("#show-more-btn-prod");products.length>productsPerPage?e.style.display="block":e.style.display="none"}function displayProducts(e){document.querySelector(".product-container").innerHTML=e.map(renderProductCard).join(""),initProductCards(e)}function renderCategoryFilters(e){document.getElementById("category-filters").innerHTML=["Пледи","Покривала","Рушники","Постільна білизна"].map((e=>`\n        <button class="category-btn ${"Пледи"===e?"active":""}" data-category="${e}">\n            ${e}\n        </button>\n    `)).join(""),document.querySelectorAll(".category-btn").forEach((t=>{t.addEventListener("click",(()=>{const r=t.dataset.category;document.querySelectorAll(".category-btn").forEach((e=>e.classList.remove("active"))),t.classList.add("active"),currentPage=1;const n=e.filter((e=>e.category===r));displayProducts(n.slice(0,productsPerPage));const a=document.querySelector("#show-more-btn-prod");n.length>productsPerPage?(a.style.display="block",a.onclick=()=>{currentPage++,displayProducts(n.slice(0,productsPerPage*currentPage)),n.length<=productsPerPage*currentPage&&(a.style.display="none")}):a.style.display="none"}))}));const t=e.filter((e=>"Пледи"===e.category));displayProducts(t.slice(0,productsPerPage));const r=document.querySelector("#show-more-btn-prod");t.length>productsPerPage?(r.style.display="block",r.onclick=()=>{currentPage++,displayProducts(t.slice(0,productsPerPage*currentPage)),t.length<=productsPerPage*currentPage&&(r.style.display="none")}):r.style.display="none"}document.addEventListener("DOMContentLoaded",(()=>{renderCategoryFilters(products);document.querySelector("#show-more-btn-prod").addEventListener("click",(()=>{currentPage++,renderPage()}))}));const cartPopup=document.querySelector(".cart_popup"),darkBg=document.querySelector(".dark-bgc"),cartContainer=document.querySelector(".order_container"),errorCart=document.querySelector(".error_cart"),cartBtn=document.querySelector(".cart"),deleteCta=document.querySelector(".delete_cta"),cancelCart=document.querySelector(".cancel_cart");function renderCartItems(){const e=document.querySelector(".order_container");e.innerHTML="";const t=JSON.parse(localStorage.getItem("cart"))||[];if(0===t.length)return e.style.display="none",void(errorCart.style.display="flex");errorCart.style.display="none",e.style.display="grid",t.forEach((t=>{const r=`\n            <div class="cart-container grid col-4" data-id="${t.id}" data-size="${t.size}">\n                <img src="${t.img}" alt="${t.title}" />\n                <div class="cart-details">\n                    <h4>${t.title}</h4>\n                    <p>Розмір: ${t.size}</p>\n                    <div class="quantity-controls">\n                        <a class="decrease-qty">-</a>\n                        <span class="cart-quantity">${t.quantity}</span>\n                        <a class="increase-qty">+</a>\n                    </div>\n                    <p class="cart-price">${t.total.toFixed(2)} грн</p>\n                    <a class="delete_cta" href="#"> \n                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25" fill="none">\n                            <path d="M21.875 6.22967C18.4062 5.88592 14.9167 5.70883 11.4375 5.70883C9.375 5.70883 7.3125 5.813 5.25 6.02133L3.125 6.22967" stroke="#CABABA" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n                            <path d="M8.854 5.17709L9.08317 3.81251C9.24984 2.82293 9.37484 2.08334 11.1353 2.08334H13.8644C15.6248 2.08334 15.7603 2.86459 15.9165 3.82293L16.1457 5.17709" stroke="#CABABA" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n                            <path d="M19.6361 9.52048L18.959 20.0101C18.8444 21.6455 18.7506 22.9163 15.8444 22.9163H9.1569C6.25065 22.9163 6.1569 21.6455 6.04232 20.0101L5.36523 9.52048" stroke="#CABABA" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n                            <path d="M10.7607 17.1875H14.2295" stroke="#CABABA" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n                            <path d="M9.896 13.0208H15.1043" stroke="#CABABA" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n                        </svg>\n                    </a>\n                </div>\n            </div>\n        `;e.insertAdjacentHTML("beforeend",r)}));const r=`\n            <div class="cart-total">\n                <h3>Загальна сума: ${t.reduce(((e,t)=>e+t.total),0).toFixed(2)} грн</h3>\n            </div>\n        `;e.insertAdjacentHTML("beforeend",r),addCartItemListeners()}function addCartItemListeners(){document.querySelectorAll(".increase-qty").forEach((e=>{e.addEventListener("click",(()=>{updateCartItemQty(e.closest(".cart-container"),1)}))})),document.querySelectorAll(".decrease-qty").forEach((e=>{e.addEventListener("click",(()=>{updateCartItemQty(e.closest(".cart-container"),-1)}))})),document.querySelectorAll(".delete_cta").forEach((e=>{e.addEventListener("click",(()=>{const t=e.closest(".cart-container"),r=parseInt(t.dataset.id),n=t.dataset.size;let a=JSON.parse(localStorage.getItem("cart"))||[];a=a.filter((e=>!(e.id===r&&e.size===n))),localStorage.setItem("cart",JSON.stringify(a)),renderCartItems()}))}))}function updateCartItemQty(e,t){const r=parseInt(e.dataset.id),n=e.dataset.size;let a=JSON.parse(localStorage.getItem("cart"))||[];const i=a.findIndex((e=>e.id===r&&e.size===n));if(-1===i)return;const c=products.find((e=>e.id===r));if(!c)return;let o=Object.keys(c.size).find((e=>c.size[e].s===n));if(!o)return;const s=c.size[o],l=s.inPack;let d=a[i].quantity+t*l;d<l&&(d=l);const p=d/l>=s.salePack?s.salePrice:s.price;a[i].quantity=d,a[i].pricePerItem=p,a[i].total=d*p,localStorage.setItem("cart",JSON.stringify(a)),renderCartItems()}function openCart(){cartPopup.style.display="block",darkBg.style.display="block",renderCartItems(),document.querySelector("#cartData").value=localStorage.getItem("cart")}cartBtn.addEventListener("click",(function(e){e.preventDefault(),openCart()})),cancelCart.addEventListener("click",(function(e){e.preventDefault(),cartPopup.style.display="none",darkBg.style.display="none"})),darkBg.addEventListener("click",(function(e){e.preventDefault(),cartPopup.style.display="none",darkBg.style.display="none"})),deleteCta?.addEventListener("click",(function(e){e.preventDefault(),localStorage.removeItem("cart"),errorCart.style.display="flex",cartContainer.style.display="none"}));
const reviews=[{src:"reviews_nikole_1",alt:"reviews_nikole_1"},{src:"reviews_nikole_2",alt:"reviews_nikole_2"},{src:"reviews_nikole_3",alt:"reviews_nikole_3"},{src:"reviews_nikole_4",alt:"reviews_nikole_4"},{src:"reviews_nikole_5",alt:"reviews_nikole_5"},{src:"reviews_nikole_6",alt:"reviews_nikole_6"},{src:"reviews_nikole_7",alt:"reviews_nikole_7"},{src:"reviews_nikole_8",alt:"reviews_nikole_8"},{src:"reviews_nikole_9",alt:"reviews_nikole_9"},{src:"reviews_nikole_10",alt:"reviews_nikole_10"},{src:"reviews_nikole_11",alt:"reviews_nikole_11"},{src:"reviews_nikole_12",alt:"reviews_nikole_12"},{src:"reviews_nikole_13",alt:"reviews_nikole_13"},{src:"reviews_nikole_14",alt:"reviews_nikole_14"},{src:"reviews_nikole_15",alt:"reviews_nikole_15"},{src:"reviews_nikole_16",alt:"reviews_nikole_16"},{src:"reviews_nikole_17",alt:"reviews_nikole_17"},{src:"reviews_nikole_18",alt:"reviews_nikole_18"},{src:"reviews_nikole_19",alt:"reviews_nikole_19"},{src:"reviews_nikole_20",alt:"reviews_nikole_20"},{src:"reviews_nikole_21",alt:"reviews_nikole_21"},{src:"reviews_nikole_22",alt:"reviews_nikole_22"},{src:"reviews_nikole_23",alt:"reviews_nikole_23"},{src:"reviews_nikole_24",alt:"reviews_nikole_24"},{src:"reviews_nikole_25",alt:"reviews_nikole_25"},{src:"reviews_nikole_26",alt:"reviews_nikole_26"},{src:"reviews_nikole_27",alt:"reviews_nikole_27"},{src:"reviews_nikole_28",alt:"reviews_nikole_28"},{src:"reviews_nikole_29",alt:"reviews_nikole_29"},{src:"reviews_nikole_30",alt:"reviews_nikole_30"},{src:"reviews_nikole_31",alt:"reviews_nikole_31"},{src:"reviews_nikole_32",alt:"reviews_nikole_32"},{src:"reviews_nikole_33",alt:"reviews_nikole_33"},{src:"reviews_nikole_34",alt:"reviews_nikole_34"},{src:"reviews_nikole_35",alt:"reviews_nikole_35"},{src:"reviews_nikole_36",alt:"reviews_nikole_36"},{src:"reviews_nikole_37",alt:"reviews_nikole_37"},{src:"reviews_nikole_38",alt:"reviews_nikole_38"},{src:"reviews_nikole_39",alt:"reviews_nikole_39"},{src:"reviews_nikole_40",alt:"reviews_nikole_40"},{src:"reviews_nikole_41",alt:"reviews_nikole_41"},{src:"reviews_nikole_42",alt:"reviews_nikole_42"},{src:"reviews_nikole_43",alt:"reviews_nikole_43"},{src:"reviews_nikole_44",alt:"reviews_nikole_44"},{src:"reviews_nikole_45",alt:"reviews_nikole_45"},{src:"reviews_nikole_46",alt:"reviews_nikole_46"},{src:"reviews_nikole_47",alt:"reviews_nikole_47"},{src:"reviews_nikole_48",alt:"reviews_nikole_48"},{src:"reviews_nikole_49",alt:"reviews_nikole_49"},{src:"reviews_nikole_50",alt:"reviews_nikole_50"},{src:"reviews_nikole_51",alt:"reviews_nikole_51"},{src:"reviews_nikole_52",alt:"reviews_nikole_52"},{src:"reviews_nikole_53",alt:"reviews_nikole_53"},{src:"reviews_nikole_54",alt:"reviews_nikole_54"},{src:"reviews_nikole_55",alt:"reviews_nikole_55"},{src:"reviews_nikole_56",alt:"reviews_nikole_56"},{src:"reviews_nikole_57",alt:"reviews_nikole_57"},{src:"reviews_nikole_58",alt:"reviews_nikole_58"},{src:"reviews_nikole_59",alt:"reviews_nikole_59"},{src:"reviews_nikole_60",alt:"reviews_nikole_60"},{src:"reviews_nikole_61",alt:"reviews_nikole_61"},{src:"reviews_nikole_62",alt:"reviews_nikole_62"},{src:"reviews_nikole_63",alt:"reviews_nikole_63"},{src:"reviews_nikole_64",alt:"reviews_nikole_64"},{src:"reviews_nikole_65",alt:"reviews_nikole_65"},{src:"reviews_nikole_66",alt:"reviews_nikole_66"},{src:"reviews_nikole_67",alt:"reviews_nikole_67"},{src:"reviews_nikole_68",alt:"reviews_nikole_68"},{src:"reviews_nikole_69",alt:"reviews_nikole_69"},{src:"reviews_nikole_70",alt:"reviews_nikole_70"},{src:"reviews_nikole_71",alt:"reviews_nikole_71"},{src:"reviews_nikole_72",alt:"reviews_nikole_72"},{src:"reviews_nikole_73",alt:"reviews_nikole_73"},{src:"reviews_nikole_74",alt:"reviews_nikole_74"},{src:"reviews_nikole_75",alt:"reviews_nikole_75"},{src:"reviews_nikole_76",alt:"reviews_nikole_76"},{src:"reviews_nikole_77",alt:"reviews_nikole_77"},{src:"reviews_nikole_78",alt:"reviews_nikole_78"},{src:"reviews_nikole_79",alt:"reviews_nikole_79"},{src:"reviews_nikole_80",alt:"reviews_nikole_80"},{src:"reviews_nikole_81",alt:"reviews_nikole_81"},{src:"reviews_nikole_82",alt:"reviews_nikole_82"},{src:"reviews_nikole_83",alt:"reviews_nikole_83"},{src:"reviews_nikole_84",alt:"reviews_nikole_84"},{src:"reviews_nikole_85",alt:"reviews_nikole_85"},{src:"reviews_nikole_86",alt:"reviews_nikole_86"},{src:"reviews_nikole_87",alt:"reviews_nikole_87"},{src:"reviews_nikole_88",alt:"reviews_nikole_88"},{src:"reviews_nikole_89",alt:"reviews_nikole_89"},{src:"reviews_nikole_90",alt:"reviews_nikole_90"},{src:"reviews_nikole_91",alt:"reviews_nikole_91"},{src:"reviews_nikole_92",alt:"reviews_nikole_92"},{src:"reviews_nikole_93",alt:"reviews_nikole_93"},{src:"reviews_nikole_94",alt:"reviews_nikole_94"},{src:"reviews_nikole_95",alt:"reviews_nikole_95"},{src:"reviews_nikole_96",alt:"reviews_nikole_96"},{src:"reviews_nikole_97",alt:"reviews_nikole_97"},{src:"reviews_nikole_98",alt:"reviews_nikole_98"},{src:"reviews_nikole_99",alt:"reviews_nikole_99"},{src:"reviews_nikole_100",alt:"reviews_nikole_100"},{src:"reviews_nikole_101",alt:"reviews_nikole_101"},{src:"reviews_nikole_102",alt:"reviews_nikole_102"},{src:"reviews_nikole_103",alt:"reviews_nikole_103"},{src:"reviews_nikole_104",alt:"reviews_nikole_104"},{src:"reviews_nikole_105",alt:"reviews_nikole_105"},{src:"reviews_nikole_106",alt:"reviews_nikole_106"},{src:"reviews_nikole_107",alt:"reviews_nikole_107"},{src:"reviews_nikole_108",alt:"reviews_nikole_108"},{src:"reviews_nikole_109",alt:"reviews_nikole_109"},{src:"reviews_nikole_110",alt:"reviews_nikole_110"},{src:"reviews_nikole_111",alt:"reviews_nikole_111"},{src:"reviews_nikole_112",alt:"reviews_nikole_112"},{src:"reviews_nikole_113",alt:"reviews_nikole_113"},{src:"reviews_nikole_114",alt:"reviews_nikole_114"}];
document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".dark-bgc"),t=document.querySelector(".dark-bgc-succes"),n=document.querySelector(".privacy_container"),i=document.querySelector(".privacy_container .cancel_popup"),l=(document.querySelectorAll("form"),document.querySelector("#successPopup")),c=document.querySelector(".cart_popup");if(i.addEventListener("click",(function(i){i.preventDefault(),n.style.display="none",l.style.display="none",e.style.display="none",t.style.display="none"})),document.querySelector(".slider-images")){const v=document.querySelectorAll(".slider-images img");let f=0;v.length>0&&v[0].classList.add("active"),setInterval((()=>{v.length>0&&(v[f].classList.remove("active"),f=(f+1)%v.length,v[f].classList.add("active"))}),3e3)}if(document.querySelector(".burger")){const g=document.querySelector(".burger"),E=document.querySelector(".nav"),S=document.querySelector(".cancel"),b=E.querySelectorAll("a");function s(){E.style.right="-100%",e.style.display="none",n.style.display="none"}g.addEventListener("click",(function(){E.style.right="-10px",e.style.display="block"})),b.forEach((e=>{e.addEventListener("click",s)})),S.addEventListener("click",(function(e){e.preventDefault(),s()})),e.addEventListener("click",s)}let o=0;function r(){const e=document.querySelector(".reviews_list");reviews.slice(o,o+12).forEach((t=>{const n=document.createElement("picture"),i=document.createElement("img");i.src=`img/reviews/${t.src}.jpg`,i.alt=`${t.alt}`,i.setAttribute("loading","lazy"),n.appendChild(i),e.appendChild(n)})),o+=12,o>=reviews.length&&(document.querySelector("#show-more-btn").style.display="none")}document.querySelector("#show-more-btn").addEventListener("click",(function(e){e.preventDefault(),r()})),r();!function(e,t,n){e.forEach((e=>{e.addEventListener("click",(function(i){i.preventDefault();e.nextElementSibling.classList.toggle(t),e.classList.toggle(n)}))}))}(document.querySelectorAll(".readmore"),"visible","readmore-active");const a=document.querySelectorAll(".nav a "),d=document.querySelectorAll(".description-more"),u=document.querySelectorAll(".menu_footer a");let y=null;function p(){d.forEach((e=>e.classList.remove("visible")))}function m(){a.forEach((e=>e.classList.remove("visible")))}function m(){u.forEach((e=>e.classList.remove("visible")))}a.forEach((e=>{e.addEventListener("click",(function(t){const n=e.getAttribute("data-target");p(),m();const i=document.getElementById(n);i&&(y&&y.previousElementSibling&&y.previousElementSibling.classList.remove("readmore-active"),i.classList.add("visible"),i.previousElementSibling&&i.previousElementSibling.classList.add("readmore-active"),y=i)}))})),u.forEach((e=>{e.addEventListener("click",(function(t){const n=e.getAttribute("data-target");p(),m();const i=document.getElementById(n);i&&(y&&y.previousElementSibling&&y.previousElementSibling.classList.remove("readmore-active"),i.classList.add("visible"),i.previousElementSibling&&i.previousElementSibling.classList.add("readmore-active"),y=i)}))})),p(),m(),l.style.transition="opacity 0.5s ease",l.style.opacity="0",l.style.zIndex="-1",t.style.transition="opacity 0.5s ease",t.style.opacity="0",document.querySelectorAll("form[action='sendorder.php'], form[action='senddata.php'], form[action='sendcontact.php']").forEach((n=>{n.addEventListener("submit",(i=>{if(validateForm(n)){function s(){l.style.opacity="0",l.style.visibility="hidden",t.style.opacity="0",setTimeout((()=>{t.style.display="none",l.style.display="none"}),500)}popupSpivpracia.style.display="none",c.style.display="none",l.style.display="block",l.style.zIndex="10",e.style.display="none",t.style.display="block",setTimeout((()=>{l.style.opacity="1",l.style.visibility="visible",t.style.opacity="1"}),10),t.addEventListener("click",s);l.querySelector(".successPopup .cancel_popup").addEventListener("click",s)}}))}))}));